import{u as g,j as e,a as d,s as y,r,N as L,b as _,c as k,O as $}from"./index-166f2e56.js";import{a as b,u as N,O as S,S as f,L as j}from"./Skeleton-eb003223.js";import"./styled-42428bf9.js";const z=()=>{const i=g();function s(){y(d).then(()=>{i("/login")})}return e.jsx(e.Fragment,{children:e.jsx("header",{className:" text-bg-dark",children:e.jsx("div",{className:"container-fluid col-12",children:e.jsxs("div",{className:"d-flex flex-wrap align-items-center justify-content-between",children:[e.jsx("a",{href:"/",className:"d-flex align-items-center  m-md-0 text-white text-decoration-none",children:e.jsx("h1",{className:"mt-2",children:"Tasks."})}),e.jsxs("div",{className:"dropdown text-end",children:[e.jsx("a",{href:"#",className:"d-block link-body-emphasis text-decoration-none dropdown-toggle m-10","data-bs-toggle":"dropdown","aria-expanded":"false",children:e.jsx("img",{src:`${d.currentUser.photoURL||`https://eu.ui-avatars.com/api/?name=${d.currentUser.displayName}&size=250`}`,alt:"mdo",width:"32",height:"32",className:"rounded-circle"})}),e.jsxs("ul",{className:"dropdown-menu text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"#",children:d.currentUser.email})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"#",onClick:s,children:"Sign out"})})]})]})]})})})})},E="_lists_tn343_1",U="_listItems_tn343_7",I="_activeList_tn343_23",p={lists:E,listItems:U,activeList:I},C=()=>{var t;const i=b.create({baseURL:"https://server-jv22ygxvfa-uc.a.run.app/api",headers:{Authorization:`Bearer ${(t=d.currentUser)==null?void 0:t.accessToken}`}});localStorage.getItem("uid");const[s,n]=r.useState(""),[l,a]=r.useState(!0),{setLists:o}=N(),c=g();function m(h){n(h.target.value),h.target.value===""?a(!0):a(!1)}function x(){const h=S();i.post("/list",{name:s,listId:h}).then(u=>{o(w=>[...w,u.data]),u.data&&c(`/task/${u.data._id}`)})}return e.jsxs("div",{className:"flex flex-nowrap ",style:{minWidth:"155px"},children:[e.jsx("button",{type:"button",className:"btn active mb-md-2","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:e.jsx("h3",{className:"m-0",children:"My Lists +"})}),e.jsx("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog  modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title ",style:{color:"black"},id:"exampleModalLabel",children:"Add new List"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body input-group input-group-lg",children:e.jsx("input",{type:"text",required:!0,onChange:m,value:s,className:"form-control",placeholder:"Enter new List name"})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"button",onClick:x,className:"btn btn-dark","data-bs-dismiss":l?"":"modal",children:"Save changes"})]})]})})})]})},O=i=>{const{lists:s,setLists:n}=N();return e.jsxs("div",{className:` ${p.lists} d-flex flex-md-column flex-row flex-nowrap align-items-center align-items-md-start p-0 p-md-4 overflow-auto`,children:[e.jsx(C,{setLists:n}),e.jsx("nav",{className:"nav flex-row flex-md-column flex-nowrap flex-shrink-0 overflow-auto",children:s.length>0&&!i.loading?s.map(l=>e.jsx(L,{className:({isActive:a,isPending:o,isTransitioning:c})=>[p.listItems,a?p.activeList:"",o?"pending":"",c?"transitioning":""].join(" "),to:`/task/${l._id}`,children:l.name},l._id)):e.jsxs("div",{className:"d-flex d-md-block align-items-center",children:[e.jsx(f,{variant:"text",sx:{fontSize:"1.5rem",bgcolor:"lightGray",width:"100px",margin:"0px 10px"}}),e.jsx(f,{variant:"text",sx:{fontSize:"1.5rem",bgcolor:"lightGray",width:"80px",margin:"0px 10px"}}),e.jsx(f,{variant:"text",sx:{fontSize:"1.5rem",bgcolor:"lightGray",width:"80px",margin:"0px 10px"}})]})})]})},T="_main_1ufze_1",M="_lists_1ufze_9",A="_dashbody_1ufze_23",v={main:T,lists:M,dashbody:A},B=()=>{var x;const i=b.create({baseURL:"https://server-jv22ygxvfa-uc.a.run.app/api",headers:{Authorization:`Bearer ${(x=d.currentUser)==null?void 0:x.accessToken}`}}),s=g(),n=_(),l=k(),[a,o]=r.useState([]),[c,m]=r.useState(!0);return r.useEffect(()=>{m(!0),console.time("Function Execution Time (ms)"),i.get("/list").then(t=>{o(t.data),n.pathname==="/"&&t.data&&s(`/task/${t.data[0]._id}`)}).catch(t=>{console.log(t)}).finally(()=>{m(!1)}),console.timeEnd("Function Execution Time (ms)")},[]),r.useEffect(()=>{n.pathname==="/"&&a.length&&s(`/task/${a[0]._id}`)},[n.pathname]),e.jsx(e.Fragment,{children:d.currentUser&&e.jsxs("div",{className:`container-fluid d-flex flex-column m-0 p-0 ${v.main}`,children:[e.jsx("div",{className:"col-12 flex-shrink-0",children:e.jsx(z,{})}),e.jsxs("div",{className:"container-fluid col-12 p-0 m-0 overflow-auto d-flex flex-column flex-md-row",style:{maxHeight:"calc(100vh - 72.31px)",height:"calc(100vh - 72.31px)"},children:[e.jsx("div",{className:` ${v.lists}    flex-fill  overflow-auto flex-grow-0 flex-shrink-0 `,style:{minWidth:"270px"},children:e.jsx(j,{value:{lists:a,setLists:o},children:e.jsx(O,{loading:c})})}),e.jsx("div",{className:` flex-fill px-md-5 px-1 pb-1 overflow-auto ${l.state==="loading"?"loading":""}`,children:e.jsx(j,{value:{lists:a,setLists:o},children:e.jsx($,{})})})]})]})})};export{B as default};
