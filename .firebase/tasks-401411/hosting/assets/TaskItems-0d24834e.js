import{a as k,r as d,j as e,u as z,n as U,i as G}from"./index-166f2e56.js";import{a as N,O as F,u as B,S as y}from"./Skeleton-eb003223.js";import{r as T,i as $}from"./createSvgIcon-2de89d0c.js";import"./styled-42428bf9.js";const O="_activeList_rx6x8_1",V="_box_rx6x8_29",q="_addnewtask_rx6x8_49",P="_boxContent_rx6x8_73",H="_task_rx6x8_83",Y="_checkBox_rx6x8_99",W="_checkBoxInactive_rx6x8_119",Z="_checkMark_rx6x8_139",J="_inactive_rx6x8_145",v={activeList:O,box:V,addnewtask:q,boxContent:P,task:H,checkBox:Y,checkBoxInactive:W,checkMark:Z,inactive:J},K=t=>{var i;const s=N.create({baseURL:"https://server-jv22ygxvfa-uc.a.run.app/api",headers:{Authorization:`Bearer ${(i=k.currentUser)==null?void 0:i.accessToken}`}}),[a,n]=d.useState(!0);localStorage.getItem("uid");function u(l){n(r=>!r),s.delete("task",{data:{_id:t.task._id}}).then(r=>{t.setTasks(c=>c.filter(x=>x._id!==t.task._id)),n(c=>!c)})}return e.jsxs("div",{onClick:u,className:`d-flex ${v.task} align-items-center p-1 ${a?v.active:v.inactive}`,children:[e.jsx("div",{className:`${a?v.checkBox:v.checkBoxInactive} m-0 p-0`}),e.jsx("div",{className:`${a?v.checkMark:v.checkMarkInactive} m-0 p-0`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-check-lg",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"})})}),e.jsx("p",{className:"p-0 m-0 ms-2",children:t.task.content})]})},Q=t=>{var l;const s=N.create({baseURL:"https://server-jv22ygxvfa-uc.a.run.app/api",headers:{Authorization:`Bearer ${(l=k.currentUser)==null?void 0:l.accessToken}`}}),[a,n]=d.useState("");function u(r){n(r.target.value)}function i(r){if(r.preventDefault(),a==="")return;const c=F();s.post("/task/",{listId:t.listId,content:a,taskId:c}).then(x=>{}),t.setTasks(x=>[...x,{_id:c,content:a}]),n("")}return e.jsx("div",{className:v.addnewtask,children:e.jsx("form",{onSubmit:i,children:e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("input",{type:"text",onChange:u,value:a,className:"form-control  bg-tertiary rounded-3",placeholder:"âž• Add new Task","aria-label":"tasks","aria-describedby":"button-addon2"}),e.jsx("button",{type:"submit",className:"btn  ",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px",className:"GfYBMd v6TC2e",children:e.jsx("path",{d:"M6.7,17.9v-3.7l4-1.8c0.4-0.2,0.4-0.7,0-0.9l-4-1.8V6.1L19.8,12L6.7,17.9z M23.7,11.5L5.4,3.3  c-0.1,0-0.1,0-0.2,0C5,3.3,4.7,3.5,4.7,3.8v5.9v4.8v5.9c0,0.3,0.2,0.5,0.5,0.5c0.1,0,0.1,0,0.2,0l18.3-8.2  C24.1,12.3,24.1,11.7,23.7,11.5z"})})})]})})})};var E={},X=$;Object.defineProperty(E,"__esModule",{value:!0});var R=E.default=void 0,ee=X(T()),te=e,ae=(0,ee.default)((0,te.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");R=E.default=ae;const se=t=>{var i;localStorage.getItem("uid");const s=N.create({baseURL:"https://server-jv22ygxvfa-uc.a.run.app/api",headers:{Authorization:`Bearer ${(i=k.currentUser)==null?void 0:i.accessToken}`}}),a=z(),{setLists:n}=B();function u(){s.delete("/list",{data:{_id:t.listId}}).then(l=>{n(r=>r.filter(c=>c._id!==t.listId)),l.data&&a("/")})}return e.jsx(e.Fragment,{children:!t.default&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn p-0 ","data-bs-toggle":"modal","data-bs-target":"#deleteList",children:e.jsx(R,{})}),e.jsx("div",{className:"modal fade",id:"deleteList",tabIndex:"-1","aria-labelledby":"deleteList","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog  modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title ",style:{color:"black"},id:"deleteList",children:"Delete List"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body ",children:e.jsxs("p",{style:{fontSize:"22px"},children:[" ","Are you sure you want to delete this list? This will delete all the tasks in this list."]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"button",onClick:u,className:"btn btn-dark","data-bs-dismiss":"modal",children:"Confirm Delete"})]})]})})})]})})};var M={},ne=$;Object.defineProperty(M,"__esModule",{value:!0});var A=M.default=void 0,ie=ne(T()),re=e,ce=(0,ie.default)((0,re.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");A=M.default=ce;const le=t=>{function s(){console.log("edit mode"),t.setEditable(!0)}return e.jsx(e.Fragment,{children:e.jsx("button",{className:"btn pe-0",onClick:s,children:e.jsx(A,{})})})};function S(t,s,a){return s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}var I={click:"onClick",focusin:"onFocus",focusout:"onFocus",mousedown:"onMouseDown",mouseup:"onMouseUp",touchstart:"onTouchStart",touchend:"onTouchEnd"},D=function(t){var s,a=t.children,n=t.onClickAway,u=t.focusEvent,i=u===void 0?"focusin":u,l=t.mouseEvent,r=l===void 0?"click":l,c=t.touchEvent,x=c===void 0?"touchend":c,j=d.useRef(null),_=d.useRef(null),p=d.useRef(!1);d.useEffect(function(){return setTimeout(function(){p.current=!0},0),function(){p.current=!1}},[]);var b=function(h){return function(m){_.current=m.target;var f=a==null?void 0:a.props[h];f&&f(m)}};d.useEffect(function(){var h,m,f=(h=(m=j.current)===null||m===void 0?void 0:m.ownerDocument)!==null&&h!==void 0?h:document,g=function(C){p.current&&(j.current&&j.current.contains(C.target)||_.current===C.target||!f.contains(C.target)||n(C))};return f.addEventListener(r,g),f.addEventListener(x,g),f.addEventListener(i,g),function(){f.removeEventListener(r,g),f.removeEventListener(x,g),f.removeEventListener(i,g)}},[i,r,n,x]);var o=I[r],L=I[x],w=I[i];return U.Children.only(d.cloneElement(a,(S(s={ref:function(h){j.current=h;var m=a.ref;typeof m=="function"?m(h):m&&(m.current=h)}},w,b(w)),S(s,o,b(o)),S(s,L,b(L)),s)))};D.displayName="ClickAwayListener";const oe=t=>{var b;const s=N.create({baseURL:"https://server-jv22ygxvfa-uc.a.run.app/api",headers:{Authorization:`Bearer ${(b=k.currentUser)==null?void 0:b.accessToken}`}}),a=t.list,{setLists:n}=B(),[u,i]=d.useState(!1),[l,r]=d.useState(a.name),c=a._id;localStorage.getItem("uid");const x=z();function j(o){r(o.target.value)}const _=()=>{i(!1)};function p(o){o.preventDefault(),l.trim()!==""&&s.put("/list",{_id:c,name:l}).then(L=>{n(w=>w.map(h=>h._id===c?{...h,name:l}:h)),i(!1)}).catch(L=>{console.log(L),x("/")})}return e.jsx("div",{className:v.activeList,children:e.jsx(D,{onClickAway:_,children:e.jsxs("div",{className:"d-flex overflow-hidden",children:[u&&e.jsxs("form",{onSubmit:p,className:"d-flex",children:[e.jsx("input",{onChange:j,type:"text",className:"form-control ",value:l}),e.jsx("button",{type:"submit",onClick:p,className:"btn  ",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px",className:"GfYBMd v6TC2e",children:e.jsx("path",{d:"M6.7,17.9v-3.7l4-1.8c0.4-0.2,0.4-0.7,0-0.9l-4-1.8V6.1L19.8,12L6.7,17.9z M23.7,11.5L5.4,3.3  c-0.1,0-0.1,0-0.2,0C5,3.3,4.7,3.5,4.7,3.8v5.9v4.8v5.9c0,0.3,0.2,0.5,0.5,0.5c0.1,0,0.1,0,0.2,0l18.3-8.2  C24.1,12.3,24.1,11.7,23.7,11.5z"})})})]}),!u&&e.jsxs("div",{className:"p-0 m-0 d-flex overflow-hidden  mw-100",children:[e.jsxs("div",{className:"flex-fill text-truncate overflow-hidden mw-100",style:{maxWidth:"calc(100% - 1000px)"},children:[l," "]}),e.jsx(le,{listid:c,setEditable:i,setLists:n}),e.jsx(se,{setLists:n,listId:c,default:a.default})]})]})})})},ve=t=>{var b;const s=N.create({baseURL:"https://server-jv22ygxvfa-uc.a.run.app/api",headers:{Authorization:`Bearer ${(b=k.currentUser)==null?void 0:b.accessToken}`}}),a=G(),n=a.taskId,[u,i]=d.useState(!0),[l,r]=d.useState(null),c=k.currentUser.uid,[x,j]=d.useState(null),[_,p]=d.useState("");return d.useEffect(()=>{i(!0),c&&n&&s.get("/task",{params:{_id:n}}).then(o=>{r(o.data[0]),j(o.data[1]),p(o.data[1].name)}).catch(o=>{console.log(o)}).finally(()=>{i(!1)})},[a]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column mh-100 h-100",children:[u?e.jsx(y,{variant:"text",sx:{fontSize:"3rem",bgcolor:"lightGray",width:"300px",margin:"0px 10px"}}):e.jsx(oe,{setName:p,list:x}),e.jsx("div",{className:`${v.tasks} flex-fill h-100  d-md-block d-flex justify-content-center pb-md-3`,children:e.jsxs("div",{className:`${v.box} p-0 m-0 `,children:[e.jsx("div",{className:`${v.boxContent} , overflow-auto p-0 m-2 mx-md-3`,children:!u&&l?l.map(o=>e.jsx(K,{task:o,id:o._id,listId:n,setTasks:r},o._id)):e.jsxs("div",{className:"align-items-center",children:[e.jsx(y,{variant:"text",sx:{fontSize:"1.5rem",bgcolor:"lightGray",width:"90%",margin:"0px 10px"}}),e.jsx(y,{variant:"text",sx:{fontSize:"1.5rem",bgcolor:"lightGray",width:"80%",margin:"0px 10px"}}),e.jsx(y,{variant:"text",sx:{fontSize:"1.5rem",bgcolor:"lightGray",width:"70%",margin:"0px 10px"}}),e.jsx(y,{variant:"text",sx:{fontSize:"1.5rem",bgcolor:"lightGray",width:"80%",margin:"0px 10px"}})]})}),e.jsx(Q,{listId:n,setTasks:r})]})})]})})};export{ve as default};
